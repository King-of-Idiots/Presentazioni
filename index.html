<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scroll Image Animation</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 3000vh; /* Abbastanza spazio per scrollare */
            font-family: Arial, sans-serif;
            background-color: #333;
        }

        .image-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            transition: transform 1s ease, opacity 1s ease;
            z-index: 1;
        }

        .image-container img {
            width: 100%;
            height: auto;
        }

        .text {
            position: absolute;
            top: 110%;
            left: 50%;
            transform: translateX(-50%);
            width: 60vw;
            font-size: 18px;
            text-align: center;
            color: white;
        }

        /* Wrapper della galleria che permette lo scroll orizzontale */
        .gallery-wrapper {
            position: relative;
            width: 100vw;
            height: 400px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Galleria che si muove orizzontalmente */
        .gallery {
            left: 100%;
            bottom: 30%;
            position: fixed;
            display: flex;
            gap: 30px;
            transition: transform 0.2s ease-out;
        }

        /* Immagini della galleria */
        .gallery-image {
            width: 250px;
            height: 200px;
            object-fit: cover;
            opacity: 0.3;
            transition: transform 0.5s ease, opacity 0.5s ease;
        }

        /* Immagine attiva (centrata) */
        .gallery-image.active {
            width: 500px;
            height: 400px;
            opacity: 1;
            transform: scale(1.2);
        }

        /* Immagine successiva (semi-trasparente) */
        .gallery-image.next {
            opacity: 0.5;
            transform: scale(0.9);
        }

        /* Immagine fissa in alto a sinistra */
        .fixed-image {
            position: fixed;
            top: 5%;
            left: 7%;
            width: 400px;
            height: 400px;
            object-fit: cover;
            z-index: 100; /* Garantisce che l'immagine fissa sia sempre sopra */
        }
        
        .textautori {
            position: absolute;
            top: 45%;
            left: 22%;
            transform: translateX(-50%);
            width: 60vw;
            font-size: 20px;
            text-align: center;
            color: white;
        }
        
    </style>
</head>
<body>

    <!-- Immagine fissa nell'angolo -->
    <div class="fixed-image">
        <img src="Immagini/Autori intarsi.png" alt="Immagine Fissa" class="fixed-image">
        <p class="textautori">Gli autori Giovan Francesco Capoferri</p>
        <p style="top:50%;" class="textautori">e Lorenzo Lotto</p>
    </div> 

    <!-- Galleria di immagini -->
    <section class="gallery-wrapper">
        <div class="gallery">
            <img src="Immagini/Adamo_e_Eva_tarsia.png" alt="Immagine 1" class="gallery-image"> <!-- Questa Ã¨ ora la nuova img1 -->
            <div style="top: 112%; left: 16%; font-size: 130%;" class="text" id="testo1-1">Testo immagine 1</div>
            
            <img src="Immagini/Tarsia_della_Giuditta_restaurata.jpg" alt="Immagine 2" class="gallery-image">
            <div style="top: 112%; left: 32%; font-size: 130%;" class="text" id="testo1-2">Testo immagine 2</div>
            
            <img src="Immagini/Tarsia 1.jpg" alt="Immagine 3" class="gallery-image">
            <div style="top: 112%; left: 51%; font-size: 130%;" class="text" id="testo1-3">Testo immagine 3</div>
            
            <img src="Immagini/Immagine 4.png" alt="Immagine 4" class="gallery-image">
            <div style="top: 112%; left: 68%; font-size: 130%;" class="text" id="testo1-4">Testo immagine 4</div>
            
            <img src="Immagini/Immagine 5.png" alt="Immagine 5" class="gallery-image">
            <div style="top: 112%; left: 31%; font-size: 130%;" class="text" id="testo1-5">Testo immagine 5</div>
        </div>
    </section>
    
    <!-- Immagine 2 -->
    <div class="image-container" id="img2-container">
        <img src="Immagini/Immagine 2.png" alt="Image 2">
        <div class="text">Testo immagine 2</div>
    </div>

    <!-- Immagine 3 -->
    <div class="image-container" id="img3-container">
        <img src="Immagini/Immagine 3.png" alt="Image 3">
        <div class="text">Testo immagine 3</div>
    </div>

    <!-- Immagine 4 -->
    <div class="image-container" id="img4-container">
        <img src="Immagini/Immagine 4.png" alt="Image 4">
        <div class="text">Testo immagine 4</div>
    </div>

    <!-- Immagine 5 -->
    <div class="image-container" id="img5-container">
        <img src="Immagini/Immagine 5.png" alt="Image 5">
        <div class="text">Testo immagine 5</div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const galleryImages = document.querySelectorAll('.gallery-image');
            const fixedImage = document.querySelectorAll('.fixed-image');
            const autori = document.querySelectorAll('.textautori');
            const gallery = document.querySelector('.gallery');
            const totalImages = galleryImages.length;
            const testo1 = document.getElementById('testo1-1');
            const testo2 = document.getElementById('testo1-2');
            const testo3 = document.getElementById('testo1-3');
            const testo4 = document.getElementById('testo1-4');
            const testo5 = document.getElementById('testo1-5');

            function updateGallery(scrollPercent) {
                const totalWidth = gallery.scrollWidth;
                const viewWidth = window.innerWidth;
                const maxScroll = totalWidth - viewWidth;

                let centeredIndex = Math.floor(scrollPercent * totalImages);
                if (centeredIndex >= totalImages) {
                    centeredIndex = totalImages - 1;
                }

                const centeredImage = galleryImages[centeredIndex];
                const centeredImageOffset = centeredImage.offsetLeft + (centeredImage.offsetWidth / 2);
                const scrollX = 1600 + centeredImageOffset - (viewWidth / 2);

                gallery.style.transform = `translateX(${-scrollX}px)`;

                galleryImages.forEach((img, index) => {
                    img.classList.remove('active', 'next');

                    if (index === centeredIndex) {
                        img.classList.add('active');
                        testo1.style.opacity = index === 0 ? 1 : 0;
                        testo2.style.opacity = index === 1 ? 1 : 0;
                        testo3.style.opacity = index === 2 ? 1 : 0;
                        testo4.style.opacity = index === 3 ? 1 : 0;
                        testo5.style.opacity = index === 4 ? 1 : 0;
                    } else if (index === (centeredIndex + 1) % totalImages) {
                        img.classList.add('next');
                    }
                });
            }

            window.addEventListener('scroll', () => {
                const scrollY = window.scrollY;
                const scrollMax = document.body.scrollHeight - window.innerHeight;
                const scrollThreshold = scrollMax / 12;

                const scrollPercent = scrollY / scrollThreshold;

                updateGallery(scrollPercent);

                galleryImages.forEach((img) => {
                    if (scrollY <= scrollThreshold) {
                        img.style.opacity = 1;
                    } else {
                        img.style.opacity = 1 - (scrollY / scrollThreshold);
                    }
                });

                fixedImage.forEach((img) => {
                    if (scrollY <= scrollThreshold) {
                        img.style.opacity = 1;
                    } else {
                        img.style.opacity = 1 - (scrollY / scrollThreshold);
                    }
                });

                autori.forEach((text) => {
                    if (scrollY <= scrollThreshold) {
                        text.style.opacity = 1;
                    } else {
                        text.style.opacity = 1 - (scrollY / scrollThreshold);
                    }
                });
            });
        });

        // Funzione per l'animazione dell'immagine 2
        function updateImage2(scrollPosition) {
            const img2 = document.getElementById('img2-container');
            const startScroll3 = 2500;
            const endScroll3 = 3000;

            if (scrollPosition >= startScroll2 && scrollPosition < endScroll2) {
                img2.style.transform = 'translate(-50%, -50%) scale(2.5)';
                img2.style.opacity = '1';
            }

            if (scrollPosition >= endScroll2) {
                img2.style.transform = 'translate(-50%, -50%) scale(6)';
                img2.style.opacity = '0';
            }

            if (scrollPosition < startScroll2) {
                img2.style.transform = 'translate(-50%, -50%) scale(0)';
                img2.style.opacity = '0';
            }
        }

        // Funzione per l'animazione dell'immagine 3
        function updateImage3(scrollPosition) {
            const img3 = document.getElementById('img3-container');
            const startScroll4 = 3500;
            const endScroll4 = 4000;

            if (scrollPosition >= startScroll3 && scrollPosition < endScroll3) {
                img3.style.transform = 'translate(-50%, -50%) scale(2.5)';
                img3.style.opacity = '1';
            }

            if (scrollPosition >= endScroll3) {
                img3.style.transform = 'translate(-50%, -50%) scale(6)';
                img3.style.opacity = '0';
            }

            if (scrollPosition < startScroll3) {
                img3.style.transform = 'translate(-50%, -50%) scale(0)';
                img3.style.opacity = '0';
            }
        }

        // Funzione per l'animazione dell'immagine 4
        function updateImage4(scrollPosition) {
            const img4 = document.getElementById('img4-container');
            const startScroll5 = 4500;
            const endScroll5 = 5000;

            if (scrollPosition >= startScroll4 && scrollPosition < endScroll4) {
                img4.style.transform = 'translate(-50%, -50%) scale(2.5)';
                img4.style.opacity = '1';
            }

            if (scrollPosition >= endScroll4) {
                img4.style.transform = 'translate(-50%, -50%) scale(6)';
                img4.style.opacity = '0';
            }

            if (scrollPosition < startScroll4) {
                img4.style.transform = 'translate(-50%, -50%) scale(0)';
                img4.style.opacity = '0';
            }
        }

        // Funzione per l'animazione dell'immagine 5
        function updateImage5(scrollPosition) {
            const img5 = document.getElementById('img5-container');
            const startScroll5 = 5000;
            const endScroll5 = 5500;

            if (scrollPosition >= startScroll5 && scrollPosition < endScroll5) {
                img5.style.transform = 'translate(-50%, -50%) scale(2.5)';
                img5.style.opacity = '1';
            }

            if (scrollPosition >= endScroll5) {
                img5.style.transform = 'translate(-50%, -50%) scale(6)';
                img5.style.opacity = '0';
            }

            if (scrollPosition < startScroll5) {
                img5.style.transform = 'translate(-50%, -50%) scale(0)';
                img5.style.opacity = '0';
            }
        }

        // Aggiungi un listener per lo scroll
        window.addEventListener('scroll', () => {
            const scrollPosition = window.scrollY;
            updateImage2(scrollPosition);
            updateImage3(scrollPosition);
            updateImage4(scrollPosition);
            updateImage5(scrollPosition);
        });

        // Chiama le funzioni all'inizio per aggiornare la posizione iniziale
        updateImage2(window.scrollY);
        updateImage3(window.scrollY);
        updateImage4(window.scrollY);
        updateImage5(window.scrollY);
    </script>

</body>
</html>
